<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <div>mode
      global
      # Core typographic rhythm (these are defaults; override in your theme)
      heading-level-1: font-size=38px, font-weight=700
      heading-level-2: font-size=28px, font-weight=600
      heading-level-3: font-size=22px, font-weight=600
      body-text: line-height=1.7

    </div>
    <p># Docz</p>
    <p>**Docz** is a compact documentation engine and file format built for speed, clarity, and *developer ergonomics*.</p>
    <p>Write in `.dcz`, render to HTML, and get a live local preview with hot‑reload. Out of the box, Docz supports **bold**, *italic*, inline `code`, [links](https://ziglang.org), fenced code blocks, and LaTeX math via KaTeX.</p>
    <p>## Highlights</p>
    <p>- Tiny binary, zero‑node runtime; batteries included.</p>
    <p>- Fast live preview with auto‑reload.</p>
    <p>- First‑class KaTeX math (vendored, offline‑friendly).</p>
    <p>- Optional TailwindCSS theme (vendored or monorepo‑built).</p>
    <p>- Pragmatic `.dcz` shorthand with room to grow: simple writing flow now, power features later.</p>
    <p>## Quick Start</p>
    <pre><code>lang
      bash
      # Build and run the CLI
      zig build

      # Preview an example document
      zig build run -- run ./examples/hello.dcz

    </code></pre>
    <p>Open the printed URL in your browser. Edits to `hello.dcz` will auto‑reload.</p>
    <p>## Status</p>
    <p>Docz is under **active development**. The CLI and the preview server are stable enough for experimentation, and the `.dcz` shorthand includes the essentials while we iterate toward the full spec.</p>
    <p>## The `.dcz` Basics</p>
    <p>Headings, paragraphs, inline styling, links, code blocks, and display math:</p>
    <pre><code>lang
      text
      # Hello, Docz!
      This is **bold**, *italic*, and `inline code`, plus a [link](https://ziglang.org).

    </code></pre>
    <div class="math">E = mc^2
    </div>
    <pre><code>lang
      zig
      const std = @import("std");
      pub fn main() !void {
      std.debug.print("Hello from Zig\\n", .{});
      }

    </code></pre>
    <p>### Notes</p>
    <p>- Inline shortcuts work everywhere **except** inside `pre`, `code`, `script`, and `style`.</p>
    <p>- `@math ... @end` produces a KaTeX display block (vendored into `third_party/katex/*`).</p>
    <p>- `@code(lang:"...") ... @end` escapes HTML and sets a `language-<lang>` class for syntax highlighting by external tools/themes.</p>
    <p>## Live Preview</p>
    <p>The `run` subcommand compiles `.dcz` to a temporary directory and launches the built‑in preview server:</p>
    <pre><code>lang
      bash
      zig build run -- run ./docs/SPEC.dcz

    </code></pre>
    <p>The <span class="color = red">preview </span> server exposes a small set of routes (used internally by the CLI and tests):</p>
    <p>- `/view?path=docs/SPEC.dcz` — render a full HTML page</p>
    <p>- `/render?path=docs/SPEC.dcz` — render body fragment</p>
    <p>- `/third_party/...` — serves vendored assets (KaTeX, Tailwind theme)</p>
    <p>- `/__docz_hot.txt` — file polled by the live‑reload script</p>
    <p>## Themes & Tailwind</p>
    <p>Docz ships with a **default Tailwind theme**. On build, the CLI looks for:</p>
    <p>1. Monorepo build: `themes/default/dist/docz.tailwind.css`</p>
    <p>2. Otherwise, the newest vendored theme under `third_party/tailwind/docz-theme-*/css/docz.tailwind.css`</p>
    <p>If found, the CSS is copied next to the generated `index.html` and linked automatically.</p>
    <p>### Building the monorepo theme (optional)</p>
    <pre><code>lang
      bash
      # From the repository root:
      cd themes/default
      npm install
      npm run build
      # Result: themes/default/dist/docz.tailwind.css

    </code></pre>
    <p>## Vendored Assets</p>
    <p>Run once to fetch/verify external assets into `third_party/`:</p>
    <pre><code>lang
      bash
      zig build vendor

    </code></pre>
    <p>This will place KaTeX and the Docz Tailwind theme under versioned directories with checksums and a lock file.</p>
    <p>## CLI Overview</p>
    <pre><code>lang
      text
      Docz CLI Usage:
      docz build <file.dcz>       Build .dcz file to HTML
      docz preview                Start local preview server
      docz enable wasm            Enable WASM execution support (planned)

      `docz run <file.dcz>` compiles to a temp dir and delegates to `preview`.

    </code></pre>
    <p>## Repo Structure</p>
    <pre><code>lang
      text
      docz/
      ├─ src/               # core, parser, renderer, CLI commands
      ├─ web-preview/       # preview server and hot-reload plumbing
      ├─ themes/default/    # optional Tailwind theme (monorepo build)
      ├─ third_party/       # vendored KaTeX and theme artifacts
      ├─ tests/             # unit, integration, and e2e tests
      └─ tools/             # vendor bootstrap/verify tooling

    </code></pre>
    <p>## Contributing</p>
    <p>- Keep functions small and testable; prefer pure helpers.</p>
    <p>- Write tests alongside behavior.</p>
    <p>- Avoid hidden global state; pass allocators and buffers explicitly.</p>
    <p>- Prefer clear, boring code over cleverness.</p>
    <p>### Running the test suite</p>
    <pre><code>lang
      bash
      zig build test-all --summary all

    </code></pre>
    <p>## Roadmap</p>
    <p>- Full `.dcz` parser with directive blocks (`@table`, `@graph`, etc.)</p>
    <p>- Rich plugin system for import/export and rendering hooks</p>
    <p>- Syntax‑highlighting pipeline and theme slots</p>
    <p>- Optional WASM execution surface (guarded, secure)</p>
    <p>## License</p>
    <p>MIT — see `LICENSE`.</p>
    <p>**Happy documenting!**</p>
  </body>
</html>
